(()=>{var e={96:(e,t,n)=>{var i="Expected a function",o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),f=Object.prototype.toString,g=Math.max,v=Math.min,p=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==f.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||a.test(e)?c(e.slice(2),n?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var o=!0,r=!0;if("function"!=typeof e)throw new TypeError(i);return m(n)&&(o="leading"in n?!!n.leading:o,r="trailing"in n?!!n.trailing:r),function(e,t,n){var o,r,s,a,c,l,u=0,d=!1,f=!1,w=!0;if("function"!=typeof e)throw new TypeError(i);function b(t){var n=o,i=r;return o=r=void 0,u=t,a=e.apply(i,n)}function y(e){return u=e,c=setTimeout(E,t),d?b(e):a}function S(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-u>=s}function E(){var e=p();if(S(e))return L(e);c=setTimeout(E,function(e){var n=t-(e-l);return f?v(n,s-(e-u)):n}(e))}function L(e){return c=void 0,w&&o?b(e):(o=r=void 0,a)}function O(){var e=p(),n=S(e);if(o=arguments,r=this,l=e,n){if(void 0===c)return y(l);if(f)return c=setTimeout(E,t),b(l)}return void 0===c&&(c=setTimeout(E,t)),a}return t=h(t)||0,m(n)&&(d=!!n.leading,s=(f="maxWait"in n)?g(h(n.maxWait)||0,t):s,w="trailing"in n?!!n.trailing:w),O.cancel=function(){void 0!==c&&clearTimeout(c),u=0,o=l=r=c=void 0},O.flush=function(){return void 0===c?a:L(p())},O}(e,t,{leading:o,maxWait:t,trailing:r})}},57:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveLineMarker=void 0;const i=n(761);t.ActiveLineMarker=class{onDidChangeTextEditorSelection(e){const{previous:t}=(0,i.getElementsForSourceLine)(e);this._update(t&&t.element)}_update(e){this._unmarkActiveElement(this._current),this._markActiveElement(e),this._current=e}_unmarkActiveElement(e){e&&(e.className=e.className.replace(/\bcode-active-line\b/g,""))}_markActiveElement(e){e&&(e.className+=" code-active-line")}}},774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onceDocumentLoaded=void 0,t.onceDocumentLoaded=function(e){"loading"===document.readyState||"uninitialized"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}},608:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPosterForVsCode=void 0;const i=n(414);t.createPosterForVsCode=e=>new class{postMessage(t,n){e.postMessage({type:t,source:(0,i.getSettings)().source,body:n})}}},761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditorLineNumberForPageOffset=t.scrollToRevealSourceLine=t.getLineElementsAtPageOffset=t.getElementsForSourceLine=void 0;const i=n(414);function o(e){return 0,t=(0,i.getSettings)().lineCount-1,n=e,Math.min(t,Math.max(0,n));var t,n}const r=(()=>{let e;return()=>(e||(e=Array.prototype.map.call(document.querySelectorAll('div[class^="data-line-"], div[class*=" data-line-"]'),(e=>{const t=e.className.split(" ").pop().match(/data-line-(\d+)/)[1];return{element:e,line:parseInt(t)}})).filter((e=>!isNaN(e.line)))),e)})();function s(e){const t=Math.floor(e+1),n=r();let i=n[0]||null;for(const e of n){if(e.line===t)return{previous:e,next:void 0};if(e.line>t)return{previous:i,next:e};i=e}return{previous:i}}function a(e){const t=r(),n=e-window.scrollY;let i=-1,o=t.length-1;for(;i+1<o;){const e=Math.floor((i+o)/2),r=t[e].element.getBoundingClientRect();r.top+r.height>=n?o=e:i=e}const s=t[o],a=s.element.getBoundingClientRect();return o>=1&&a.top>n?{previous:t[i],next:s}:{previous:s}}t.getElementsForSourceLine=s,t.getLineElementsAtPageOffset=a,t.scrollToRevealSourceLine=function(e){const{previous:t,next:n}=s(e);if(t&&(0,i.getSettings)().scrollPreviewWithEditor){let i=0;const o=t.element.getBoundingClientRect().top;if(n&&n.line!==t.line){const r=(e-t.line)/(n.line-t.line),s=n.element.getBoundingClientRect().top-o;i=window.scrollY+o+r*s}else i=0===e?0:window.scrollY+o;window.scroll(0,Math.max(1,i))}},t.getEditorLineNumberForPageOffset=function(e){const{previous:t,next:n}=a(e);if(t){const i=t.element.getBoundingClientRect(),r=e-window.scrollY-i.top;if(n){const e=r/(n.element.getBoundingClientRect().top-i.top);return o(t.line+e*(n.line-t.line))}{const e=r/i.height;return o(t.line+e)}}return null}},414:(e,t)=>{"use strict";let n;function i(e){const t=document.getElementById("vscode-asciidoc-preview-data");if(t){const n=t.getAttribute(e);if(n)return JSON.parse(n)}throw new Error(`Could not load data for ${e}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.getSettings=t.getData=void 0,t.getData=i,t.getSettings=function(){if(n)return n;if(n=i("data-settings"),n)return n;throw new Error("Could not load settings")}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";const e=n(57),t=n(774),i=n(608),o=n(761),r=n(414),s=n(96);let a=!0;const c=new e.ActiveLineMarker,l=(0,r.getSettings)(),u=acquireVsCodeApi(),d=u.getState(),f=Object.assign(Object.assign({line:l.line},"object"==typeof d?d:{}),(0,r.getData)("data-state"));u.setState(f);const g=(0,i.createPosterForVsCode)(u);window.cspAlerter.setPoster(g),window.styleLoadingMonitor.setPoster(g),window.onload=()=>{p()},(0,t.onceDocumentLoaded)((()=>{const e=!l.preservePreviewWhenHidden;if(e&&window.addEventListener("scroll",s((()=>{u.setState(Object.assign(Object.assign({},u.getState()),{scrollX:window.scrollX,scrollY:window.scrollY}))}),250,{leading:!0,trailing:!0})),l.scrollPreviewWithEditor)setTimeout((()=>{const e=u.getState().line;isNaN(e)||(a=!0,(0,o.scrollToRevealSourceLine)(e))}),0);else if(e){const{scrollX:e,scrollY:t}=u.getState(),n={top:t,left:e,behavior:"auto"};window.scrollTo(n)}}));const v=(()=>{const e=s((e=>{a=!0,(0,o.scrollToRevealSourceLine)(e)}),50);return t=>{isNaN(t)||(u.setState(Object.assign(Object.assign({},u.getState()),{line:t})),e(t))}})(),p=s((()=>{const e=[],t=document.getElementsByTagName("img");if(t){let n;for(n=0;n<t.length;n++){const i=t[n];i.classList.contains("loading")&&i.classList.remove("loading"),e.push({id:i.id,height:i.height,width:i.width})}g.postMessage("cacheImageSizes",e)}}),50);window.addEventListener("resize",(()=>{a=!0,p()}),!0),window.addEventListener("message",(e=>{if(e.data.source===l.source)switch(e.data.type){case"onDidChangeTextEditorSelection":{const t=e.data.line;c.onDidChangeTextEditorSelection(t),u.setState(Object.assign(Object.assign({},u.getState()),{line:t}));break}case"updateView":v(e.data.line)}}),!1);const m=["http:","https:","mailto:","vscode:","vscode-insiders:"];document.addEventListener("click",(e=>{if(!e)return;let t=e.target;for(;t;){if(t.tagName&&"A"===t.tagName&&t.href){if(t.getAttribute("href").startsWith("#"))return;let n=t.getAttribute("data-href");if(!n){if(m.some((e=>t.href.startsWith(e))))return;n=t.getAttribute("href")}return!/^[a-z-]+:\/\//i.test(n)||n.startsWith("file:///")?(g.postMessage("clickLink",{href:n}),e.preventDefault(),void e.stopPropagation()):void 0}t=t.parentNode}}),!0),window.addEventListener("scroll",s((()=>{const e=(0,o.getEditorLineNumberForPageOffset)(window.scrollY);u.setState(Object.assign(Object.assign({},u.getState()),{line:e})),l.scrollEditorWithPreview&&(a?a=!1:0===window.scrollY?g.postMessage("revealLine",{line:0}):"number"!=typeof e||isNaN(e)||g.postMessage("revealLine",{line:e}))}),50))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQ0ZBLEdBQWlCLEVBRU0sSUFBbkJ0QyxPQUFPQyxRQUVUOEMsRUFBVTFFLFlBQVksYUFBYyxDQUFFaEIsS0FBTSxJQUNuQixpQkFBVEEsR0FBc0JpQyxNQUFNakMsSUFDNUMwRixFQUFVMUUsWUFBWSxhQUFjLENBQUVoQixTLEdBSTNDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc2NpaWRvY3Rvci12c2NvZGUvLi9ub2RlX21vZHVsZXMvbG9kYXNoLnRocm90dGxlL2luZGV4LmpzIiwid2VicGFjazovL2FzY2lpZG9jdG9yLXZzY29kZS8uL3ByZXZpZXctc3JjL2FjdGl2ZUxpbmVNYXJrZXIudHMiLCJ3ZWJwYWNrOi8vYXNjaWlkb2N0b3ItdnNjb2RlLy4vcHJldmlldy1zcmMvZXZlbnRzLnRzIiwid2VicGFjazovL2FzY2lpZG9jdG9yLXZzY29kZS8uL3ByZXZpZXctc3JjL21lc3NhZ2luZy50cyIsIndlYnBhY2s6Ly9hc2NpaWRvY3Rvci12c2NvZGUvLi9wcmV2aWV3LXNyYy9zY3JvbGwtc3luYy50cyIsIndlYnBhY2s6Ly9hc2NpaWRvY3Rvci12c2NvZGUvLi9wcmV2aWV3LXNyYy9zZXR0aW5ncy50cyIsIndlYnBhY2s6Ly9hc2NpaWRvY3Rvci12c2NvZGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYXNjaWlkb2N0b3ItdnNjb2RlL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vYXNjaWlkb2N0b3ItdnNjb2RlLy4vcHJldmlldy1zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRocm90dGxlZCBmdW5jdGlvbiB0aGF0IG9ubHkgaW52b2tlcyBgZnVuY2AgYXQgbW9zdCBvbmNlIHBlclxuICogZXZlcnkgYHdhaXRgIG1pbGxpc2Vjb25kcy4gVGhlIHRocm90dGxlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGBcbiAqIG1ldGhvZCB0byBjYW5jZWwgZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG9cbiAqIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYFxuICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YFxuICogdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZVxuICogdGhyb3R0bGVkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gcmV0dXJuIHRoZVxuICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLnRocm90dGxlYCBhbmQgYF8uZGVib3VuY2VgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpO1xuICpcbiAqIC8vIEludm9rZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzLlxuICogdmFyIHRocm90dGxlZCA9IF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7ICd0cmFpbGluZyc6IGZhbHNlIH0pO1xuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIHRocm90dGxlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyB0aHJvdHRsZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIHRocm90dGxlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsZWFkaW5nID0gdHJ1ZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwge1xuICAgICdsZWFkaW5nJzogbGVhZGluZyxcbiAgICAnbWF4V2FpdCc6IHdhaXQsXG4gICAgJ3RyYWlsaW5nJzogdHJhaWxpbmdcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlO1xuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuaW1wb3J0IHsgZ2V0RWxlbWVudHNGb3JTb3VyY2VMaW5lIH0gZnJvbSAnLi9zY3JvbGwtc3luYydcblxuZXhwb3J0IGNsYXNzIEFjdGl2ZUxpbmVNYXJrZXIge1xuICBwcml2YXRlIF9jdXJyZW50OiBhbnlcblxuICBvbkRpZENoYW5nZVRleHRFZGl0b3JTZWxlY3Rpb24gKGxpbmU6IG51bWJlcikge1xuICAgIGNvbnN0IHsgcHJldmlvdXMgfSA9IGdldEVsZW1lbnRzRm9yU291cmNlTGluZShsaW5lKVxuICAgIHRoaXMuX3VwZGF0ZShwcmV2aW91cyAmJiBwcmV2aW91cy5lbGVtZW50KVxuICB9XG5cbiAgX3VwZGF0ZSAoYmVmb3JlOiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuX3VubWFya0FjdGl2ZUVsZW1lbnQodGhpcy5fY3VycmVudClcbiAgICB0aGlzLl9tYXJrQWN0aXZlRWxlbWVudChiZWZvcmUpXG4gICAgdGhpcy5fY3VycmVudCA9IGJlZm9yZVxuICB9XG5cbiAgX3VubWFya0FjdGl2ZUVsZW1lbnQgKGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkKSB7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKC9cXGJjb2RlLWFjdGl2ZS1saW5lXFxiL2csICcnKVxuICB9XG5cbiAgX21hcmtBY3RpdmVFbGVtZW50IChlbGVtZW50OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCkge1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9ICcgY29kZS1hY3RpdmUtbGluZSdcbiAgfVxufVxuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgZnVuY3Rpb24gb25jZURvY3VtZW50TG9hZGVkIChmOiAoKSA9PiB2b2lkKSB7XG4gIC8vIEB0cy1pZ25vcmUgVFMyMzY3XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ3VuaW5pdGlhbGl6ZWQnKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGYpXG4gIH0gZWxzZSB7XG4gICAgZigpXG4gIH1cbn1cbiIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgZ2V0U2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VQb3N0ZXIge1xuICAvKipcbiAgICogUG9zdCBhIG1lc3NhZ2UgdG8gdGhlIGFzY2lpZG9jIGV4dGVuc2lvblxuICAgKi9cbiAgcG9zdE1lc3NhZ2UodHlwZTogc3RyaW5nLCBib2R5OiBvYmplY3QpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlUG9zdGVyRm9yVnNDb2RlID0gKHZzY29kZTogYW55KSA9PiB7XG4gIHJldHVybiBuZXcgY2xhc3MgaW1wbGVtZW50cyBNZXNzYWdlUG9zdGVyIHtcbiAgICBwb3N0TWVzc2FnZSAodHlwZTogc3RyaW5nLCBib2R5OiBvYmplY3QpOiB2b2lkIHtcbiAgICAgIHZzY29kZS5wb3N0TWVzc2FnZSh7XG4gICAgICAgIHR5cGUsXG4gICAgICAgIHNvdXJjZTogZ2V0U2V0dGluZ3MoKS5zb3VyY2UsXG4gICAgICAgIGJvZHksXG4gICAgICB9KVxuICAgIH1cbiAgfSgpXG59XG4iLCIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IGdldFNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncydcblxuZnVuY3Rpb24gY2xhbXAgKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgdmFsdWU6IG51bWJlcikge1xuICByZXR1cm4gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZhbHVlKSlcbn1cblxuZnVuY3Rpb24gY2xhbXBMaW5lIChsaW5lOiBudW1iZXIpIHtcbiAgcmV0dXJuIGNsYW1wKDAsIGdldFNldHRpbmdzKCkubGluZUNvdW50IC0gMSwgbGluZSlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb2RlTGluZUVsZW1lbnQge1xuICBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgbGluZTogbnVtYmVyO1xufVxuXG5jb25zdCBnZXRDb2RlTGluZUVsZW1lbnRzID0gKCgpID0+IHtcbiAgbGV0IGVsZW1lbnRzOiBDb2RlTGluZUVsZW1lbnRbXVxuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmICghZWxlbWVudHMpIHtcbiAgICAgIGVsZW1lbnRzID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdkaXZbY2xhc3NePVwiZGF0YS1saW5lLVwiXSwgZGl2W2NsYXNzKj1cIiBkYXRhLWxpbmUtXCJdJyksXG4gICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY29kZS1saW5lJyksXG4gICAgICAgIChlbGVtZW50OiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBudW0gPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpLnBvcCgpLm1hdGNoKC9kYXRhLWxpbmUtKFxcZCspLylbMV1cbiAgICAgICAgICBjb25zdCBsaW5lID0gcGFyc2VJbnQobnVtKVxuICAgICAgICAgIC8vY29uc3QgbGluZSA9ICtlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1saW5lJyk7XG4gICAgICAgICAgcmV0dXJuIHsgZWxlbWVudCwgbGluZSB9XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKHg6IGFueSkgPT4gIWlzTmFOKHgubGluZSkpIGFzIENvZGVMaW5lRWxlbWVudFtdXG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50c1xuICB9XG59KSgpXG5cbi8qKlxuICogRmluZCB0aGUgaHRtbCBlbGVtZW50cyB0aGF0IG1hcCB0byBhIHNwZWNpZmljIHRhcmdldCBsaW5lIGluIHRoZSBlZGl0b3IuXG4gKlxuICogSWYgYW4gZXhhY3QgbWF0Y2gsIHJldHVybnMgYSBzaW5nbGUgZWxlbWVudC4gSWYgdGhlIGxpbmUgaXMgYmV0d2VlbiBlbGVtZW50cyxcbiAqIHJldHVybnMgdGhlIGVsZW1lbnQgcHJpb3IgdG8gYW5kIHRoZSBlbGVtZW50IGFmdGVyIHRoZSBnaXZlbiBsaW5lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNGb3JTb3VyY2VMaW5lICh0YXJnZXRMaW5lOiBudW1iZXIpOiB7IHByZXZpb3VzOiBDb2RlTGluZUVsZW1lbnQ7IG5leHQ/OiBDb2RlTGluZUVsZW1lbnQ7IH0ge1xuICBjb25zdCBsaW5lTnVtYmVyID0gTWF0aC5mbG9vcih0YXJnZXRMaW5lICsgMSkgLy8gb2ZmIGJ5IG9uZSBsaW5lXG4gIGNvbnN0IGxpbmVzID0gZ2V0Q29kZUxpbmVFbGVtZW50cygpXG4gIGxldCBwcmV2aW91cyA9IGxpbmVzWzBdIHx8IG51bGxcbiAgZm9yIChjb25zdCBlbnRyeSBvZiBsaW5lcykge1xuICAgIGlmIChlbnRyeS5saW5lID09PSBsaW5lTnVtYmVyKSB7XG4gICAgICByZXR1cm4geyBwcmV2aW91czogZW50cnksIG5leHQ6IHVuZGVmaW5lZCB9XG4gICAgfSBlbHNlIGlmIChlbnRyeS5saW5lID4gbGluZU51bWJlcikge1xuICAgICAgcmV0dXJuIHsgcHJldmlvdXMsIG5leHQ6IGVudHJ5IH1cbiAgICB9XG4gICAgcHJldmlvdXMgPSBlbnRyeVxuICB9XG4gIHJldHVybiB7IHByZXZpb3VzIH1cbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBodG1sIGVsZW1lbnRzIHRoYXQgYXJlIGF0IGEgc3BlY2lmaWMgcGl4ZWwgb2Zmc2V0IG9uIHRoZSBwYWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZUVsZW1lbnRzQXRQYWdlT2Zmc2V0IChvZmZzZXQ6IG51bWJlcik6IHsgcHJldmlvdXM6IENvZGVMaW5lRWxlbWVudDsgbmV4dD86IENvZGVMaW5lRWxlbWVudDsgfSB7XG4gIGNvbnN0IGxpbmVzID0gZ2V0Q29kZUxpbmVFbGVtZW50cygpXG4gIGNvbnN0IHBvc2l0aW9uID0gb2Zmc2V0IC0gd2luZG93LnNjcm9sbFlcbiAgbGV0IGxvID0gLTFcbiAgbGV0IGhpID0gbGluZXMubGVuZ3RoIC0gMVxuICB3aGlsZSAobG8gKyAxIDwgaGkpIHtcbiAgICBjb25zdCBtaWQgPSBNYXRoLmZsb29yKChsbyArIGhpKSAvIDIpXG4gICAgY29uc3QgYm91bmRzID0gbGluZXNbbWlkXS5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgaWYgKGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0ID49IHBvc2l0aW9uKSB7XG4gICAgICBoaSA9IG1pZFxuICAgIH0gZWxzZSB7XG4gICAgICBsbyA9IG1pZFxuICAgIH1cbiAgfVxuICBjb25zdCBoaUVsZW1lbnQgPSBsaW5lc1toaV1cbiAgY29uc3QgaGlCb3VuZHMgPSBoaUVsZW1lbnQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICBpZiAoaGkgPj0gMSAmJiBoaUJvdW5kcy50b3AgPiBwb3NpdGlvbikge1xuICAgIGNvbnN0IGxvRWxlbWVudCA9IGxpbmVzW2xvXVxuICAgIHJldHVybiB7IHByZXZpb3VzOiBsb0VsZW1lbnQsIG5leHQ6IGhpRWxlbWVudCB9XG4gIH1cbiAgcmV0dXJuIHsgcHJldmlvdXM6IGhpRWxlbWVudCB9XG59XG5cbi8qKlxuICogQXR0ZW1wdCB0byByZXZlYWwgdGhlIGVsZW1lbnQgZm9yIGEgc291cmNlIGxpbmUgaW4gdGhlIGVkaXRvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbFRvUmV2ZWFsU291cmNlTGluZSAobGluZTogbnVtYmVyKSB7XG4gIGNvbnN0IHsgcHJldmlvdXMsIG5leHQgfSA9IGdldEVsZW1lbnRzRm9yU291cmNlTGluZShsaW5lKVxuICBpZiAocHJldmlvdXMgJiYgZ2V0U2V0dGluZ3MoKS5zY3JvbGxQcmV2aWV3V2l0aEVkaXRvcikge1xuICAgIGxldCBzY3JvbGxUbyA9IDBcbiAgICBjb25zdCByZWN0ID0gcHJldmlvdXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHByZXZpb3VzVG9wID0gcmVjdC50b3BcbiAgICBpZiAobmV4dCAmJiBuZXh0LmxpbmUgIT09IHByZXZpb3VzLmxpbmUpIHtcbiAgICAgIC8vIEJldHdlZW4gdHdvIGVsZW1lbnRzLiBHbyB0byBwZXJjZW50YWdlIG9mZnNldCBiZXR3ZWVuIHRoZW0uXG4gICAgICBjb25zdCBiZXR3ZWVuUHJvZ3Jlc3MgPSAobGluZSAtIHByZXZpb3VzLmxpbmUpIC8gKG5leHQubGluZSAtIHByZXZpb3VzLmxpbmUpXG4gICAgICBjb25zdCBlbGVtZW50T2Zmc2V0ID0gbmV4dC5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCAtIHByZXZpb3VzVG9wXG4gICAgICBzY3JvbGxUbyA9IHdpbmRvdy5zY3JvbGxZICsgcHJldmlvdXNUb3AgKyBiZXR3ZWVuUHJvZ3Jlc3MgKiBlbGVtZW50T2Zmc2V0XG4gICAgfSBlbHNlIGlmIChsaW5lID09PSAwKSB7XG4gICAgICBzY3JvbGxUbyA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgc2Nyb2xsVG8gPSB3aW5kb3cuc2Nyb2xsWSArIHByZXZpb3VzVG9wXG4gICAgfVxuICAgIHdpbmRvdy5zY3JvbGwoMCwgTWF0aC5tYXgoMSwgc2Nyb2xsVG8pKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFZGl0b3JMaW5lTnVtYmVyRm9yUGFnZU9mZnNldCAob2Zmc2V0OiBudW1iZXIpIHtcbiAgY29uc3QgeyBwcmV2aW91cywgbmV4dCB9ID0gZ2V0TGluZUVsZW1lbnRzQXRQYWdlT2Zmc2V0KG9mZnNldClcbiAgaWYgKHByZXZpb3VzKSB7XG4gICAgY29uc3QgcHJldmlvdXNCb3VuZHMgPSBwcmV2aW91cy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3Qgb2Zmc2V0RnJvbVByZXZpb3VzID0gKG9mZnNldCAtIHdpbmRvdy5zY3JvbGxZIC0gcHJldmlvdXNCb3VuZHMudG9wKVxuICAgIGlmIChuZXh0KSB7XG4gICAgICBjb25zdCBwcm9ncmVzc0JldHdlZW5FbGVtZW50cyA9IG9mZnNldEZyb21QcmV2aW91cyAvIChuZXh0LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gcHJldmlvdXNCb3VuZHMudG9wKVxuICAgICAgY29uc3QgbGluZSA9IHByZXZpb3VzLmxpbmUgKyBwcm9ncmVzc0JldHdlZW5FbGVtZW50cyAqIChuZXh0LmxpbmUgLSBwcmV2aW91cy5saW5lKVxuICAgICAgcmV0dXJuIGNsYW1wTGluZShsaW5lKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9ncmVzc1dpdGhpbkVsZW1lbnQgPSBvZmZzZXRGcm9tUHJldmlvdXMgLyAocHJldmlvdXNCb3VuZHMuaGVpZ2h0KVxuICAgICAgY29uc3QgbGluZSA9IHByZXZpb3VzLmxpbmUgKyBwcm9ncmVzc1dpdGhpbkVsZW1lbnRcbiAgICAgIHJldHVybiBjbGFtcExpbmUobGluZSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cbiIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgaW50ZXJmYWNlIFByZXZpZXdTZXR0aW5ncyB7XG4gIHNvdXJjZTogc3RyaW5nO1xuICBsaW5lOiBudW1iZXI7XG4gIGxpbmVDb3VudDogbnVtYmVyO1xuICBzY3JvbGxQcmV2aWV3V2l0aEVkaXRvcj86IGJvb2xlYW47XG4gIHNjcm9sbEVkaXRvcldpdGhQcmV2aWV3OiBib29sZWFuO1xuICBkaXNhYmxlU2VjdXJpdHlXYXJuaW5nczogYm9vbGVhbjtcbiAgZG91YmxlQ2xpY2tUb1N3aXRjaFRvRWRpdG9yOiBib29sZWFuO1xuICBwcmVzZXJ2ZVByZXZpZXdXaGVuSGlkZGVuOiBib29sZWFuO1xufVxuXG5sZXQgY2FjaGVkU2V0dGluZ3M6IFByZXZpZXdTZXR0aW5ncyB8IHVuZGVmaW5lZFxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YTxUID0ge30+IChrZXk6IHN0cmluZyk6IFQge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzY29kZS1hc2NpaWRvYy1wcmV2aWV3LWRhdGEnKVxuICBpZiAoZWxlbWVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShrZXkpXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgbG9hZCBkYXRhIGZvciAke2tleX1gKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2V0dGluZ3MgKCk6IFByZXZpZXdTZXR0aW5ncyB7XG4gIGlmIChjYWNoZWRTZXR0aW5ncykge1xuICAgIHJldHVybiBjYWNoZWRTZXR0aW5nc1xuICB9XG5cbiAgY2FjaGVkU2V0dGluZ3MgPSBnZXREYXRhKCdkYXRhLXNldHRpbmdzJylcbiAgaWYgKGNhY2hlZFNldHRpbmdzKSB7XG4gICAgcmV0dXJuIGNhY2hlZFNldHRpbmdzXG4gIH1cblxuICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBsb2FkIHNldHRpbmdzJylcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgQWN0aXZlTGluZU1hcmtlciB9IGZyb20gJy4vYWN0aXZlTGluZU1hcmtlcidcbmltcG9ydCB7IG9uY2VEb2N1bWVudExvYWRlZCB9IGZyb20gJy4vZXZlbnRzJ1xuaW1wb3J0IHsgY3JlYXRlUG9zdGVyRm9yVnNDb2RlIH0gZnJvbSAnLi9tZXNzYWdpbmcnXG5pbXBvcnQgeyBnZXRFZGl0b3JMaW5lTnVtYmVyRm9yUGFnZU9mZnNldCwgc2Nyb2xsVG9SZXZlYWxTb3VyY2VMaW5lIH0gZnJvbSAnLi9zY3JvbGwtc3luYydcbmltcG9ydCB7IGdldERhdGEsIGdldFNldHRpbmdzIH0gZnJvbSAnLi9zZXR0aW5ncydcbmltcG9ydCB0aHJvdHRsZSA9IHJlcXVpcmUoJ2xvZGFzaC50aHJvdHRsZScpO1xuXG5kZWNsYXJlIGxldCBhY3F1aXJlVnNDb2RlQXBpOiBhbnlcblxubGV0IHNjcm9sbERpc2FibGVkID0gdHJ1ZVxuY29uc3QgbWFya2VyID0gbmV3IEFjdGl2ZUxpbmVNYXJrZXIoKVxuY29uc3Qgc2V0dGluZ3MgPSBnZXRTZXR0aW5ncygpXG5cbmNvbnN0IHZzY29kZSA9IGFjcXVpcmVWc0NvZGVBcGkoKVxuXG5jb25zdCBvcmlnaW5hbFN0YXRlID0gdnNjb2RlLmdldFN0YXRlKClcblxuY29uc3Qgc3RhdGUgPSB7XG4gIGxpbmU6IHNldHRpbmdzLmxpbmUsIC8vIHNoYWRvdyBzZXR0aW5ncy5saW5lIHdpdGggdnNjb2RlLmdldFN0YXRlKCkubGluZSBpZiB0aGUgbGF0dGVyIGV4aXN0c1xuICAuLi4odHlwZW9mIG9yaWdpbmFsU3RhdGUgPT09ICdvYmplY3QnID8gb3JpZ2luYWxTdGF0ZSA6IHt9KSxcbiAgLi4uZ2V0RGF0YTxhbnk+KCdkYXRhLXN0YXRlJyksXG59XG5cbi8vIE1ha2Ugc3VyZSB0byBzeW5jIFZTIENvZGUgc3RhdGUgaGVyZVxudnNjb2RlLnNldFN0YXRlKHN0YXRlKVxuXG5jb25zdCBtZXNzYWdpbmcgPSBjcmVhdGVQb3N0ZXJGb3JWc0NvZGUodnNjb2RlKVxuXG53aW5kb3cuY3NwQWxlcnRlci5zZXRQb3N0ZXIobWVzc2FnaW5nKVxud2luZG93LnN0eWxlTG9hZGluZ01vbml0b3Iuc2V0UG9zdGVyKG1lc3NhZ2luZylcblxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgdXBkYXRlSW1hZ2VTaXplcygpXG59XG5cbm9uY2VEb2N1bWVudExvYWRlZCgoKSA9PiB7XG4gIGNvbnN0IHdpbmRvd05lZWRzUmVzdG9yYXRpb24gPSAhc2V0dGluZ3MucHJlc2VydmVQcmV2aWV3V2hlbkhpZGRlblxuXG4gIGlmICh3aW5kb3dOZWVkc1Jlc3RvcmF0aW9uKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRocm90dGxlKFxuICAgICAgKCkgPT4ge1xuICAgICAgICB2c2NvZGUuc2V0U3RhdGUoeyAuLi52c2NvZGUuZ2V0U3RhdGUoKSwgc2Nyb2xsWDogd2luZG93LnNjcm9sbFgsIHNjcm9sbFk6IHdpbmRvdy5zY3JvbGxZIH0pXG4gICAgICB9LFxuICAgICAgMjUwLFxuICAgICAgeyBsZWFkaW5nOiB0cnVlLCB0cmFpbGluZzogdHJ1ZSB9KVxuICAgIClcbiAgfVxuXG4gIGlmIChzZXR0aW5ncy5zY3JvbGxQcmV2aWV3V2l0aEVkaXRvcikge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbExpbmUgPSB2c2NvZGUuZ2V0U3RhdGUoKS5saW5lXG4gICAgICBpZiAoIWlzTmFOKGluaXRpYWxMaW5lKSkge1xuICAgICAgICBzY3JvbGxEaXNhYmxlZCA9IHRydWVcbiAgICAgICAgc2Nyb2xsVG9SZXZlYWxTb3VyY2VMaW5lKGluaXRpYWxMaW5lKVxuICAgICAgfVxuICAgIH0sIDApXG4gIH0gZWxzZSBpZiAod2luZG93TmVlZHNSZXN0b3JhdGlvbikge1xuICAgIGNvbnN0IHsgc2Nyb2xsWCwgc2Nyb2xsWSB9ID0gdnNjb2RlLmdldFN0YXRlKClcbiAgICBjb25zdCBzY3JvbGxPcHRpb25zID0geyB0b3A6IHNjcm9sbFksIGxlZnQ6IHNjcm9sbFgsIGJlaGF2aW9yOiAnYXV0bycgYXMgU2Nyb2xsQmVoYXZpb3IgfVxuICAgIHdpbmRvdy5zY3JvbGxUbyhzY3JvbGxPcHRpb25zKVxuICB9XG59KVxuXG5jb25zdCBvblVwZGF0ZVZpZXcgPSAoKCkgPT4ge1xuICBjb25zdCBkb1Njcm9sbCA9IHRocm90dGxlKChsaW5lOiBudW1iZXIpID0+IHtcbiAgICBzY3JvbGxEaXNhYmxlZCA9IHRydWVcbiAgICBzY3JvbGxUb1JldmVhbFNvdXJjZUxpbmUobGluZSlcbiAgfSwgNTApXG5cbiAgcmV0dXJuIChsaW5lOiBudW1iZXIpID0+IHtcbiAgICBpZiAoIWlzTmFOKGxpbmUpKSB7XG4gICAgICB2c2NvZGUuc2V0U3RhdGUoeyAuLi52c2NvZGUuZ2V0U3RhdGUoKSwgbGluZSB9KVxuICAgICAgZG9TY3JvbGwobGluZSlcbiAgICB9XG4gIH1cbn0pKClcblxuY29uc3QgdXBkYXRlSW1hZ2VTaXplcyA9IHRocm90dGxlKCgpID0+IHtcbiAgY29uc3QgaW1hZ2VJbmZvOiB7IGlkOiBzdHJpbmcsIGhlaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyIH1bXSA9IFtdXG4gIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKVxuICBpZiAoaW1hZ2VzKSB7XG4gICAgbGV0IGlcbiAgICBmb3IgKGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpbWcgPSBpbWFnZXNbaV1cblxuICAgICAgaWYgKGltZy5jbGFzc0xpc3QuY29udGFpbnMoJ2xvYWRpbmcnKSkge1xuICAgICAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpXG4gICAgICB9XG5cbiAgICAgIGltYWdlSW5mby5wdXNoKHtcbiAgICAgICAgaWQ6IGltZy5pZCxcbiAgICAgICAgaGVpZ2h0OiBpbWcuaGVpZ2h0LFxuICAgICAgICB3aWR0aDogaW1nLndpZHRoLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBtZXNzYWdpbmcucG9zdE1lc3NhZ2UoJ2NhY2hlSW1hZ2VTaXplcycsIGltYWdlSW5mbylcbiAgfVxufSwgNTApXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gIHNjcm9sbERpc2FibGVkID0gdHJ1ZVxuICB1cGRhdGVJbWFnZVNpemVzKClcbn0sIHRydWUpXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC5kYXRhLnNvdXJjZSAhPT0gc2V0dGluZ3Muc291cmNlKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBzd2l0Y2ggKGV2ZW50LmRhdGEudHlwZSkge1xuICAgIGNhc2UgJ29uRGlkQ2hhbmdlVGV4dEVkaXRvclNlbGVjdGlvbic6IHtcbiAgICAgIGNvbnN0IGxpbmUgPSBldmVudC5kYXRhLmxpbmVcbiAgICAgIG1hcmtlci5vbkRpZENoYW5nZVRleHRFZGl0b3JTZWxlY3Rpb24obGluZSlcbiAgICAgIHZzY29kZS5zZXRTdGF0ZSh7IC4uLnZzY29kZS5nZXRTdGF0ZSgpLCBsaW5lIH0pXG4gICAgICBicmVha1xuICAgIH1cblxuICAgIGNhc2UgJ3VwZGF0ZVZpZXcnOlxuICAgICAgb25VcGRhdGVWaWV3KGV2ZW50LmRhdGEubGluZSlcbiAgICAgIGJyZWFrXG4gIH1cbn0sIGZhbHNlKVxuXG5jb25zdCBwYXNzVGhyb3VnaExpbmtTY2hlbWVzID0gWydodHRwOicsICdodHRwczonLCAnbWFpbHRvOicsICd2c2NvZGU6JywgJ3ZzY29kZS1pbnNpZGVyczonXVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICBpZiAoIWV2ZW50KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICBsZXQgbm9kZTogYW55ID0gZXZlbnQudGFyZ2V0XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUudGFnTmFtZSAmJiBub2RlLnRhZ05hbWUgPT09ICdBJyAmJiBub2RlLmhyZWYpIHtcbiAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZSgnaHJlZicpLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGxldCBocmVmVGV4dCA9IG5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKVxuICAgICAgaWYgKCFocmVmVGV4dCkge1xuICAgICAgICAvLyBQYXNzIHRocm91Z2gga25vd24gc2NoZW1lc1xuICAgICAgICBpZiAocGFzc1Rocm91Z2hMaW5rU2NoZW1lcy5zb21lKChzY2hlbWUpID0+IG5vZGUuaHJlZi5zdGFydHNXaXRoKHNjaGVtZSkpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaHJlZlRleHQgPSBub2RlLmdldEF0dHJpYnV0ZSgnaHJlZicpXG4gICAgICB9XG5cbiAgICAgIC8vIElmIG9yaWdpbmFsIGxpbmsgZG9lc24ndCBsb29rIGxpa2UgYSB1cmwsIGRlbGVnYXRlIGJhY2sgdG8gVlMgQ29kZSB0byByZXNvbHZlXG4gICAgICBpZiAoIS9eW2Etei1dKzpcXC9cXC8vaS50ZXN0KGhyZWZUZXh0KSB8fCBocmVmVGV4dC5zdGFydHNXaXRoKCdmaWxlOi8vLycpKSB7XG4gICAgICAgIG1lc3NhZ2luZy5wb3N0TWVzc2FnZSgnY2xpY2tMaW5rJywgeyBocmVmOiBocmVmVGV4dCB9KVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGVcbiAgfVxufSwgdHJ1ZSlcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRocm90dGxlKCgpID0+IHtcbiAgY29uc3QgbGluZSA9IGdldEVkaXRvckxpbmVOdW1iZXJGb3JQYWdlT2Zmc2V0KHdpbmRvdy5zY3JvbGxZKVxuICB2c2NvZGUuc2V0U3RhdGUoeyAuLi52c2NvZGUuZ2V0U3RhdGUoKSwgbGluZSB9KVxuXG4gIGlmIChzZXR0aW5ncy5zY3JvbGxFZGl0b3JXaXRoUHJldmlldykge1xuICAgIGlmIChzY3JvbGxEaXNhYmxlZCkge1xuICAgICAgc2Nyb2xsRGlzYWJsZWQgPSBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAod2luZG93LnNjcm9sbFkgPT09IDApIHtcbiAgICAgICAgLy8gc2Nyb2xsIHRvIHRvcCwgZG9jdW1lbnQgdGl0bGUgZG9lcyBub3QgaGF2ZSBhIGRhdGEtbGluZSBhdHRyaWJ1dGVcbiAgICAgICAgbWVzc2FnaW5nLnBvc3RNZXNzYWdlKCdyZXZlYWxMaW5lJywgeyBsaW5lOiAwIH0pXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaW5lID09PSAnbnVtYmVyJyAmJiAhaXNOYU4obGluZSkpIHtcbiAgICAgICAgbWVzc2FnaW5nLnBvc3RNZXNzYWdlKCdyZXZlYWxMaW5lJywgeyBsaW5lIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG59LCA1MCkpXG4iXSwibmFtZXMiOlsiRlVOQ19FUlJPUl9URVhUIiwicmVUcmltIiwicmVJc0JhZEhleCIsInJlSXNCaW5hcnkiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJwYXJzZUludCIsImZyZWVHbG9iYWwiLCJnIiwiT2JqZWN0IiwiZnJlZVNlbGYiLCJzZWxmIiwicm9vdCIsIkZ1bmN0aW9uIiwib2JqZWN0VG9TdHJpbmciLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsIm5hdGl2ZU1heCIsIk1hdGgiLCJtYXgiLCJuYXRpdmVNaW4iLCJtaW4iLCJub3ciLCJEYXRlIiwiaXNPYmplY3QiLCJ2YWx1ZSIsInR5cGUiLCJ0b051bWJlciIsImlzT2JqZWN0TGlrZSIsImNhbGwiLCJpc1N5bWJvbCIsIm90aGVyIiwidmFsdWVPZiIsInJlcGxhY2UiLCJpc0JpbmFyeSIsInRlc3QiLCJzbGljZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJmdW5jIiwid2FpdCIsIm9wdGlvbnMiLCJsZWFkaW5nIiwidHJhaWxpbmciLCJUeXBlRXJyb3IiLCJsYXN0QXJncyIsImxhc3RUaGlzIiwibWF4V2FpdCIsInJlc3VsdCIsInRpbWVySWQiLCJsYXN0Q2FsbFRpbWUiLCJsYXN0SW52b2tlVGltZSIsIm1heGluZyIsImludm9rZUZ1bmMiLCJ0aW1lIiwiYXJncyIsInRoaXNBcmciLCJ1bmRlZmluZWQiLCJhcHBseSIsImxlYWRpbmdFZGdlIiwic2V0VGltZW91dCIsInRpbWVyRXhwaXJlZCIsInNob3VsZEludm9rZSIsInRpbWVTaW5jZUxhc3RDYWxsIiwidHJhaWxpbmdFZGdlIiwicmVtYWluaW5nV2FpdCIsImRlYm91bmNlZCIsImlzSW52b2tpbmciLCJhcmd1bWVudHMiLCJ0aGlzIiwiY2FuY2VsIiwiY2xlYXJUaW1lb3V0IiwiZmx1c2giLCJkZWJvdW5jZSIsIm9uRGlkQ2hhbmdlVGV4dEVkaXRvclNlbGVjdGlvbiIsImxpbmUiLCJwcmV2aW91cyIsImdldEVsZW1lbnRzRm9yU291cmNlTGluZSIsIl91cGRhdGUiLCJlbGVtZW50IiwiYmVmb3JlIiwiX3VubWFya0FjdGl2ZUVsZW1lbnQiLCJfY3VycmVudCIsIl9tYXJrQWN0aXZlRWxlbWVudCIsImNsYXNzTmFtZSIsImYiLCJkb2N1bWVudCIsInJlYWR5U3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY3JlYXRlUG9zdGVyRm9yVnNDb2RlIiwidnNjb2RlIiwicG9zdE1lc3NhZ2UiLCJib2R5Iiwic291cmNlIiwiZ2V0U2V0dGluZ3MiLCJjbGFtcExpbmUiLCJsaW5lQ291bnQiLCJnZXRDb2RlTGluZUVsZW1lbnRzIiwiZWxlbWVudHMiLCJBcnJheSIsIm1hcCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJudW0iLCJzcGxpdCIsInBvcCIsIm1hdGNoIiwiZmlsdGVyIiwieCIsImlzTmFOIiwidGFyZ2V0TGluZSIsImxpbmVOdW1iZXIiLCJmbG9vciIsImxpbmVzIiwiZW50cnkiLCJuZXh0IiwiZ2V0TGluZUVsZW1lbnRzQXRQYWdlT2Zmc2V0Iiwib2Zmc2V0IiwicG9zaXRpb24iLCJ3aW5kb3ciLCJzY3JvbGxZIiwibG8iLCJoaSIsImxlbmd0aCIsIm1pZCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImhlaWdodCIsImhpRWxlbWVudCIsImhpQm91bmRzIiwic2Nyb2xsUHJldmlld1dpdGhFZGl0b3IiLCJzY3JvbGxUbyIsInByZXZpb3VzVG9wIiwiYmV0d2VlblByb2dyZXNzIiwiZWxlbWVudE9mZnNldCIsInNjcm9sbCIsInByZXZpb3VzQm91bmRzIiwib2Zmc2V0RnJvbVByZXZpb3VzIiwicHJvZ3Jlc3NCZXR3ZWVuRWxlbWVudHMiLCJwcm9ncmVzc1dpdGhpbkVsZW1lbnQiLCJjYWNoZWRTZXR0aW5ncyIsImdldERhdGEiLCJrZXkiLCJnZXRFbGVtZW50QnlJZCIsImRhdGEiLCJnZXRBdHRyaWJ1dGUiLCJKU09OIiwicGFyc2UiLCJFcnJvciIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnbG9iYWxUaGlzIiwiZSIsInNjcm9sbERpc2FibGVkIiwibWFya2VyIiwiQWN0aXZlTGluZU1hcmtlciIsInNldHRpbmdzIiwiYWNxdWlyZVZzQ29kZUFwaSIsIm9yaWdpbmFsU3RhdGUiLCJnZXRTdGF0ZSIsInN0YXRlIiwic2V0U3RhdGUiLCJtZXNzYWdpbmciLCJjc3BBbGVydGVyIiwic2V0UG9zdGVyIiwic3R5bGVMb2FkaW5nTW9uaXRvciIsIm9ubG9hZCIsInVwZGF0ZUltYWdlU2l6ZXMiLCJvbmNlRG9jdW1lbnRMb2FkZWQiLCJ3aW5kb3dOZWVkc1Jlc3RvcmF0aW9uIiwicHJlc2VydmVQcmV2aWV3V2hlbkhpZGRlbiIsInRocm90dGxlIiwic2Nyb2xsWCIsImluaXRpYWxMaW5lIiwic2Nyb2xsVG9SZXZlYWxTb3VyY2VMaW5lIiwic2Nyb2xsT3B0aW9ucyIsImxlZnQiLCJiZWhhdmlvciIsIm9uVXBkYXRlVmlldyIsImRvU2Nyb2xsIiwiaW1hZ2VJbmZvIiwiaW1hZ2VzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpIiwiaW1nIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJwdXNoIiwiaWQiLCJ3aWR0aCIsImV2ZW50IiwicGFzc1Rocm91Z2hMaW5rU2NoZW1lcyIsIm5vZGUiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwiaHJlZiIsInN0YXJ0c1dpdGgiLCJocmVmVGV4dCIsInNvbWUiLCJzY2hlbWUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInBhcmVudE5vZGUiLCJnZXRFZGl0b3JMaW5lTnVtYmVyRm9yUGFnZU9mZnNldCIsInNjcm9sbEVkaXRvcldpdGhQcmV2aWV3Il0sInNvdXJjZVJvb3QiOiIifQ==